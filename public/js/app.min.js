$(function(){var e=window.location.pathname,t=e.substring(e.lastIndexOf("/")+1);function n(){var e=$("#ui main");if(768<=$(window).outerWidth()){var t=$("#ui nav").outerWidth(),n=$(window).outerWidth()-t;e.offset({top:0,left:t}),e.css({width:n,"max-width":n})}else e.removeAttr("style")}function a(){$("#menu-btn").on("click",function(){$("#ui nav").addClass("open")}),$("#close-btn").on("click",function(){$("#ui nav").removeClass("open")})}function i(){var e=$(window).outerWidth();switch(!0){case e<850:var t=$(".video > div").outerWidth();$("iframe").width(t-30),$("iframe").height("210");break;case e<992:$("iframe").width("560"),$("iframe").height("320");break;case e<1200:$("iframe").width("330"),$("iframe").height("210");break;default:$("iframe").removeAttr("style")}}function o(e){e.preventDefault();var t=$(e.target),n=t.data("id"),a=t.data("pg")||"",i=t.data("season")||"";$.ajax({method:"get",url:"/shows/"+n+"/seasons/"+i,data:{page:a},success:function(e){$("#videos").html(e)}})}$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$("#season #seasons li a").click(function(e){o(e)}),$("body").on("click","#load-more-btn",function(e){o(e)}),window.Echo=new Echo({broadcaster:"pusher",key:"7703f827b85416632c52",cluster:"eu",encrypted:!0}),void 0!==typeof t&&Echo.channel("show."+t).listen("NewComment",function(e){var t='<div class="comment"><h4>'+e.author+"</h4><p>"+e.body+'</p><p class="date">on '+e.date+"</p></div>";0!=$("#comments .comment").length?$("#comments .comment").prepend(t).hide().fadeIn(500):$("#comments").append(t).hide().fadeIn(500)}),$("nav > ul li").click(function(){$(this).children(".submenu").slideToggle(),$(this).toggleClass("active")}),a(),n(),$("#seasons a").click(function(){$(this).parents("ul").find(".active").removeClass("active"),$(this).parent().addClass("active")}),i(),$("#comments button").click(function(e){e.preventDefault();var t=$(this).parent("form");$.ajax({url:"/comments",method:"POST",data:t.serialize(),success:function(e){}})}),$(window).on("resize",function(){n(),a(),i()})});